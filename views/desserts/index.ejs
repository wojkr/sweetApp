<% layout('layouts/boilerplate') -%>
  <div id="map" class="map-cluster"></div>
  <h1 class="text-center">Browse our delicious desserts</h1>
  <p class="text-center text-muted">Have a closer look by clicking on the image, and feel the.. Sweet!</p>
  <div class="row justify-content-evenly text-center">
    <%for (let d of data){%>

      <div class="card m-3 p-0" id="card-icon">
        <a href="/desserts/<%=d._id%>">
          <%if(d.imgs&&d.imgs.length){%>
            <img src="<%=d.imgs[0].url%>" class="card-img-top" alt="..."
              onerror=src=`https://res.cloudinary.com/b789b130931413a/image/upload/v1669819470/sweetApp/NO_PICTURE_ftgbpt.jpg` />
            <%}else{%>
              <img
                src="https://res.cloudinary.com/b789b130931413a/image/upload/v1669819470/sweetApp/NO_PICTURE_ftgbpt.jpg"
                class="card-img-top" alt="..." %>
              <%}%>
                <div class="card-body">
                  <h5 class="card-title text-muted">
                    <%=d.name%>
                  </h5>
                </div>
        </a>
      </div>
      <%}%>
  </div>
  <script>
    const mapToken = '<%- process.env.MAP_TOKEN %>'
    const desserts = {features: <%- JSON.stringify(data) %>}
  </script>
  <script src="/js/clusterMap.js">
  </script>